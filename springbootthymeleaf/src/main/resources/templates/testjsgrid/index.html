<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>jsGrid - Basic Scenario</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,600,400' rel='stylesheet' type='text/css'>
    <script src="/static/jquery/jquery-1.8.3.js"></script>
    <link  type='text/css'  rel='stylesheet'  href='/static/jsgrid/jsgrid.min.css'  />
    <link  type='text/css'  rel='stylesheet'  href='/static/jsgrid/jsgrid-theme.min.css'  />

    <script  type="text/javascript"  src="/static/jsgrid/jsgrid.min.js"></script>
    <script src="/static/db.js"></script>

</head>
<body>
<h1>Basic Scenario</h1>
<div id="jsGrid"></div>

<script>
    $(function() {

        // $("#jsGrid").jsGrid({
        //     height: "70%",
        //     width: "100%",
        //     sorting: true,
        //     paging: true,
        //     fields: [
        //         { name: "Name", type: "text", width: 150 },
        //         { name: "Age", type: "number", width: 50 },
        //         { name: "Address", type: "text", width: 200 },
        //         { name: "Country", type: "select", items: db.countries, valueField: "Id", textField: "Name" },
        //         { name: "Married", type: "checkbox", title: "Is Married" }
        //     ],
        //     data: db.clients
        // });

        $("#jsGrid").jsGrid({
            height:434,autowidth:true, shrinkToFit:true,/*  autoScroll: false, *//*forceFit: true, */
                          colNames:["商品ID","商品名称","商品单价","库存","上架日期","上架时间","商品描述","操作 "],
                          colModel:[
                                      { name: "Name", type: "text", width: 150 },
                                      { name: "Age", type: "number", width: 50 },
                                      { name: "Address", type: "text", width: 200 },
                                      { name: "Country", type: "select", items: db.countries, valueField: "Id", textField: "Name" },
                                      { name: "Married", type: "checkbox", title: "Is Married" }
                                   ],
                          pager:"#pager_list_2",
                          viewrecords:true,hidegrid:false,
                          url:"/terminal/findGoodInfo",
                          datatype:'json',
                          rownumbers: true,
                          rowNum : 10,
                          rowList : [ 10, 15,30 ],
                          jsonReader: {
                               root:"dataList", page:"currPage", total:"totalpages",          //   很重要 定义了 后台分页参数的名字。
                                   records:"totalCount", repeatitems:false, id : "id"
                          },
                     gridComplete: function () {         // 数据加载完成后 添加 采购按钮
                             var ids = jQuery("#jsGrid").jqGrid('getDataIDs');
                             for (var i = 0; i < ids.length; i++) {
                                  var id = ids[i];
                                  var editBtn = "<button  style='color:#f60' onclick='purchase("+ id +")' >采购</button>";
                                  jQuery("#jsGrid").jqGrid('setRowData', ids[i], { edit: editBtn});
                                 }
                          },
        })

    });
</script>
</body>
</html>
